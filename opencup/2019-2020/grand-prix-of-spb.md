# Grand Prix of SPb

+ [ ] [A. Polynomial in a Black Box]
+ [ ] [B. Board Trick]
+ [ ] [C. Connectivity]
+ [ ] [D. Absolute Pairwise Distance]
+ [ ] [E. Multiplication and Division by 2]
+ [ ] [F. Festive Baobab]
+ [ ] [G. Flatland Elections]
+ [ ] [H. Eggs]
+ [ ] [I. Removing Pairs]
+ [ ] [J. Boxes on a Shelf]
+ [ ] [K. Two Slicers]

## A. Polynomial in a Black Box

题意：有个多项式$p(x)=a_dx^d+a_{d-1}x^{d-1}+\dots+a_1x^1+a_0) \bmod m$，其中$m=10^9+7$。现在多项式的阶和系数都不知道，你需要通过交互求出多项式的阶，也就是$d$。每次可以给出一个$x$，询问$p(x)$的值。询问次数不能超过$d+3$。

$0 \le d \le 10, 0 \le x < 10^9+7$

题解：每询问一次然后插值算出系数，判断是否可行即可。

## B. Board Trick

题意：有一个$8 \times 8$的格子，Danila和Mia开始表演魔术。Mia先找一个观众在这个$8 \times 8$的格子上填上`0`或者`1`，然后让另一个观众挑选一个$1$到$64$的数字，然后Mia选择了一个格子上位置，把它取反。格子原来的样子和观众挑选的数Danila都不知道，Danila根据格子最终的样子猜出了这个数。你需要写程序模拟这个过程。

## C. Connectivity

题意：有一个$n$个点$m$条边的随机图，保证没有自环和重边。你需要通过交互来判断这个图是否连通。你事先已经知道$n$和$m$，然后最多询问$2n$次`? i`($1 \le i \le n$)，每次返回结果如下：

+ 正整数$j$ ($1 \le j \le n$)，表示$i$和$j$之间有一条边，且之前没有告诉过你（包括`? j`这个询问)
+ $-1$，表示和$i$相邻的边都已经告诉你了。

$2 \le n \le 10^4, 1 \le m \le \min(\frac{n(n-1)}{2}, 10^4)$

## D. Absolute Pairwise Distance

题意：对于两个数组$a_1,a_2,\dots,a_{l_1}$和$b_1,b_2,\dots,b_{l_2}$，定义$d(a,b)=\sum\limits_{i=1}^{l_1}\sum\limits_{j=1}^{l_2}|a_i-b_j|$。给出一个长度为$n$的数组$a_1,a_2,\dots,a_n$和$q$个询问，每次给出两个区间$[l_1,r_1]$和$[l_2,r_2]$，求出$d((a_{l_1},a_{l_1+1},\dots,a_{r_1}),((a_{l_2},a_{l_2+1},\dots,a_{r_2}))$。

题解：离线变成前缀加加减减，之后大抵是个分块。

## E. Multiplication and Division by 2

题意：给出一个数$x$，你可以乘以$2$或者除以$2$若干次，求能否得到$y$。

题解：只要$y$的二进制表示是$x$二进制表示的前缀即可。

## F. Festive Baobab

题意：给出一棵$n$个点的有根树，你有$t$个物品。第$i$个节点的父亲是$p_i$，每放一个物品会增加$d_i$的快乐度，它的整个子树最多可以放$w_i$个物品。求怎么放置物品才能使得总快乐度最大。保证可以放下所有的物品。

$1 \le n \le 10^5, 1 \le t, d_i,w_i \le 10^9, 0 \le p_i \le n$

## G. Flatland Elections

题意：平面上$n$个人，第$i$个人位于坐标$(x_i,y_i)$。两个政党要开始竞选，每个政党先在平面上花了一条过原点的直线。每个人会优先投票给距离他最近的直线。你所在政党可以花钱说服别人改投票，花费的代价是这个人距离你这条直线的距离。求出最坏情况下，你获得$k$票需要花费的最小代价。

$1 \le k \le n \le 2000, -10^6 \le x_i, y_i \le 10^6$

题解：把所有点极角排序，相邻两个点其实就确定了一条直线，枚举这两条直线然后计算答案即可。

## H. Eggs

题意：有一个蛋托，可以放$16$个蛋，分为两行，每行各$8$个位置，一开始是空的。当里面至少有一个蛋的时候，你会拿走一个吃掉；当里面最多只有$5$个蛋的时候，你会去买恰好$10$个蛋放进去。你需要构造一个状态机，使得你每次吃的蛋都是最早买个那个。

## I. Removing Pairs

题意：给出两个字符串$s$和$t$，每次可以删掉相邻两个字符。求出能否从$t$到$s$。

$1 \le |s| \le |t| \le 10^6$

题解：其实就是找一个匹配位置，使得相邻位置之差是奇数。维护匹配$s_i$在$t$中最早出现的奇数位置和偶数位置即可。

## J. Boxes on a Shelf

题意：有$n$个盒子，第$i$个的长和宽是$a_i$和$b_i$。你要把他们放在一个长度为$L$的桌子上，只要重心在桌子内部就可能放下。求最多能放多少个。

题解：令$c_i=\min(a_i,b_i)$，显然是取$c_i$最小的若干个。然后最大两个肯定是放两边，然后挂出去一点，只需要考虑$\frac{c_i}{2}$即可。

## K. Two Slicers

题意：有一个圆形蛋糕，有两把刀，第一把刀切下去会均匀分成$a$个扇形蛋糕，第二把到会均匀分成$b$个扇形蛋糕。现在你需要分成$a+b$块，使得最大那块和最小那块大小之差最小。

$2 \le a, b \le 100$
